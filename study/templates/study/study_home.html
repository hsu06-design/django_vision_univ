{% extends "blog/base.html" %}

{% block content %}
<style>
    .study-container { display: grid; grid-template-columns: 250px 1fr; gap: 20px; font-family: 'Inter', sans-serif; }
    
    /* Sidebar Goals */
    .study-sidebar { background: #f8f9fa; padding: 20px; border-radius: 15px; border: 1px solid #e9ecef; }
    .goal-item { background: white; padding: 10px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #4ade80; font-size: 0.9rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }

    /* Timeline View */
    .timeline { background: white; border-radius: 15px; border: 1px solid #e9ecef; overflow: hidden; }
    .timeline-header { background: #4ade80; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
    
    .time-slot { display: grid; grid-template-columns: 80px 1fr; border-bottom: 1px solid #f1f5f9; min-height: 60px; }
    .time-label { padding: 10px; font-size: 0.8rem; color: #64748b; border-right: 1px solid #f1f5f9; background: #fcfcfc; }
    .task-area { padding: 5px; position: relative; }
    
    /* Task Cards */
    .task-card { background: #ecfdf5; border: 1px solid #a7f3d0; padding: 8px 12px; border-radius: 6px; font-size: 0.85rem; color: #065f46; display: flex; justify-content: space-between; align-items: center; }
    .status-badge { font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; background: #059669; color: white; }
    
    .editable:focus { outline: none; background: #fffbeb; border-radius: 4px; }
</style>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Study Dashboard üìö</h2>
        <button class="btn btn-success btn-sm" onclick="addTask()">+ Add Session</button>
    </div>

    <div class="study-container">
        <div class="study-sidebar">
            <h5 class="fw-bold mb-3">Focus Goals üéØ</h5>
            <div class="goal-item" contenteditable="true">Finish Django Project</div>
            <div class="goal-item" contenteditable="true">AI Research Paper</div>
            <div class="goal-item" contenteditable="true">Read 20 pages</div>
            <hr>
            <small class="text-muted">Tip: Click to edit goals</small>
        </div>

        <div class="timeline">
            <div class="timeline-header">
                <span id="current-date">Today's Schedule</span>
                <span class="badge bg-light text-dark">December 30, 2025</span>
            </div>

            <div id="schedule-list">
                <div class="time-slot">
                    <div class="time-label">08:00 AM</div>
                    <div class="task-area">
                        <div class="task-card">
                            <span class="editable" contenteditable="true">Morning Review & Coffee ‚òï</span>
                            <span class="status-badge">Done</span>
                        </div>
                    </div>
                </div>

                <div class="time-slot">
                    <div class="time-label">10:00 AM</div>
                    <div class="task-area">
                        <div class="task-card" style="background: #eff6ff; border-color: #bfdbfe; color: #1e40af;">
                            <span class="editable" contenteditable="true">Deep Work: Coding üíª</span>
                            <span class="status-badge" style="background: #2563eb;">In Progress</span>
                        </div>
                    </div>
                </div>

                <div class="time-slot">
                    <div class="time-label">01:00 PM</div>
                    <div class="task-area">
                        <div class="task-card" style="background: #fef2f2; border-color: #fecaca; color: #991b1b;">
                            <span class="editable" contenteditable="true">Lunch Break üçé</span>
                            <span class="status-badge" style="background: #dc2626;">Pending</span>
                        </div>
                    </div>
                </div>

                <div class="time-slot">
                    <div class="time-label">03:00 PM</div>
                    <div class="task-area p-2">
                        <small class="text-muted editable" contenteditable="true" onclick="this.innerHTML=''">+ Add task...</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<hr class="my-5">

<h4 class="mb-3">Study Resources & Notes</h4>
{% for post in posts %}
    {% endfor %}

<script>
    function addTask() {
        const list = document.getElementById('schedule-list');
        const newSlot = `
            <div class="time-slot">
                <div class="time-label">New Slot</div>
                <div class="task-area p-2">
                    <div class="task-card" style="background: #fdf2f8; border-color: #fbcfe8; color: #9d174d;">
                        <span class="editable" contenteditable="true">New Study Session...</span>
                        <span class="status-badge" style="background: #db2777;">New</span>
                    </div>
                </div>
            </div>
        `;
        list.insertAdjacentHTML('beforeend', newSlot);
    }
</script>
{% endblock %}